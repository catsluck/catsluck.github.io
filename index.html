<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CatsLuck</title>
<link rel="icon" href="img/clk.png">
<style>
body {
  font-family: Arial, Helvetica, sans-serif;
}
.no-close .ui-dialog-titlebar-close {
  display: none;
}
tr {
    border-bottom: 1px solid black;
}
td {
    text-align: right;
    font-family: 'Courier Prime';
}
.neonText {
  color: gold;
  text-shadow:
      0 0 3px yellow,
      0 0 5px lightyellow;
}
</style>
<script type="text/javascript" integrity="sha384-TOrQOibRJLhwxzAdxn9pLj7Kx8mTIBrNfq6jSOiHrB519TUbe3z/d79TTvE0Pv6d" crossorigin="anonymous" src="others/ethers-5.5.1.umd.min.js"></script>
<script>
const catsPoolAddress = "0x659F04F36e90143fCaC202D4BC36C699C078fC98"
const bchPoolAddress = "0x4d16fB4811cf8BF7a5d35397527A95911E122611"
const flexusdPoolAddress = "0xC5bBdf3838BA468359a5a97523925350dfcc3599"
const daoPoolAddress = "0x5BBAE609bd2e6E0c6c59401e59B5358F0C1D16b1"
const funPoolAddress = "0xEE4CA132e07246a0066239923EB146816Bb2ee06"
const ebenPoolAddress = "0x404B74F4B945A51FCAcF3B86b28c248aBD9496eB"
const mistPoolAddress = "0xFbc43093c71c960F26Eed32Ec73F3d096F02C053"
const tangoPoolAddress = "0x43A4a713e3248Ab6CB05EB9c817355Ea85E580Ca"
const lawPoolAddress = "0x3F52E5e897AfC6e7BF8C6A4e88f86fc6B9Ce645b"

const ReadonlyABI = [
"function info(address addr) external view returns (uint, uint, uint)",
]

async function syncPoolSizes() {
  const provider = new ethers.providers.JsonRpcProvider("https://smartbch.fountainhead.cash/mainnet");

  (async function() {
  var catsPool = new ethers.Contract(catsPoolAddress, ReadonlyABI, provider);
  var [totalCATS, totalShare, userShareAndLockUntil] = await catsPool.info(bchPoolAddress)
  var catsPoolSize = document.getElementById("catsPoolSize")
  catsPoolSize.innerText = (ethers.utils.formatUnits(totalCATS, 2)*1.0).toFixed(2)
  })();

  (async function() {
  var bchPool = new ethers.Contract(bchPoolAddress, ReadonlyABI, provider);
  var [totalBCH, totalShare, userShareAndLockUntil] = await bchPool.info(bchPoolAddress)
  var bchPoolSize = document.getElementById("bchPoolSize")
  bchPoolSize.innerText = (ethers.utils.formatUnits(totalBCH, 18)*1.0).toFixed(2)
  })();

  (async function() {
  var flexusdPool = new ethers.Contract(flexusdPoolAddress, ReadonlyABI, provider);
  var [totalFLEXUSD, totalShare, userShareAndLockUntil] = await flexusdPool.info(bchPoolAddress)
  var flexusdPoolSize = document.getElementById("flexusdPoolSize")
  flexusdPoolSize.innerText = (ethers.utils.formatUnits(totalFLEXUSD, 18)*1.0).toFixed(2)
  })();

  (async function() {
  var daoPool = new ethers.Contract(daoPoolAddress, ReadonlyABI, provider);
  var [totalDAO, totalShare, userShareAndLockUntil] = await daoPool.info(bchPoolAddress)
  var daoPoolSize = document.getElementById("daoPoolSize")
  daoPoolSize.innerText = (ethers.utils.formatUnits(totalDAO, 7)*1.0).toFixed(2)
  })();

  (async function() {
  var funPool = new ethers.Contract(funPoolAddress, ReadonlyABI, provider);
  var [totalFUN, totalShare, userShareAndLockUntil] = await funPool.info(bchPoolAddress)
  var funPoolSize = document.getElementById("funPoolSize")
  funPoolSize.innerText = (ethers.utils.formatUnits(totalFUN, 8)*1.0).toFixed(2)
  })();

  (async function() {
  var ebenPool = new ethers.Contract(ebenPoolAddress, ReadonlyABI, provider);
  var [totalEBEN, totalShare, userShareAndLockUntil] = await ebenPool.info(bchPoolAddress)
  var ebenPoolSize = document.getElementById("ebenPoolSize")
  ebenPoolSize.innerText = (ethers.utils.formatUnits(totalEBEN, 18)*1.0).toFixed(2)
  })();

  (async function() {
  var mistPool = new ethers.Contract(mistPoolAddress, ReadonlyABI, provider);
  var [totalMIST, totalShare, userShareAndLockUntil] = await mistPool.info(bchPoolAddress)
  var mistPoolSize = document.getElementById("mistPoolSize")
  mistPoolSize.innerText = (ethers.utils.formatUnits(totalMIST, 18)*1.0).toFixed(2)
  })();

  (async function() {
  var tangoPool = new ethers.Contract(tangoPoolAddress, ReadonlyABI, provider);
  var [totalTANGO, totalShare, userShareAndLockUntil] = await tangoPool.info(bchPoolAddress)
  var tangoPoolSize = document.getElementById("tangoPoolSize")
  tangoPoolSize.innerText = (ethers.utils.formatUnits(totalTANGO, 18)*1.0).toFixed(2)
  })();

  (async function() {
  var lawPool = new ethers.Contract(lawPoolAddress, ReadonlyABI, provider);
  var [totalLAW, totalShare, userShareAndLockUntil] = await lawPool.info(bchPoolAddress)
  var lawPoolSize = document.getElementById("lawPoolSize")
  lawPoolSize.innerText = (ethers.utils.formatUnits(totalLAW, 18)*1.0).toFixed(2)
  })();
}

async function init() {
  await syncPoolSizes()
  window.setInterval(async function() {
    await syncPoolSizes()
  }, 10000)
}
</script>
</head>
<body>
<center><img style="height: 80px; width: auto;" src="img/catsluck.jpg"/></center>
<h2 style="text-align: center">Game & Stake Your Tokens. Have Fun!</h2>
<div>
<table style="margin: auto">
	<tr style="font-size: 18px"><th></th><th>POOL</th><th>&nbsp;&nbsp;&nbsp;Total Amount</th></tr>
	<tr><td><img src="img/CATS.png" style="height: 30px; width: auto"></td><td><a href="cats" style="font-size: 18px">$CATS</a></td>
	<td id="catsPoolSize"></td></tr>
	<tr><td><img src="img/BCH.jpg" style="height: 30px; width: auto"></td><td><a href="bch" style="font-size: 18px">BCH</a></td>
	<td id="bchPoolSize"></td></tr>
	<tr><td><img src="img/flexUSD.png" style="height: 30px; width: auto"></td><td><a href="flexusd" style="font-size: 18px">FLEXUSD</a></td>
	<td id="flexusdPoolSize"></td></tr>
	<tr><td><img src="img/DAO.png" style="height: 30px; width: auto"></td><td><a href="dao" style="font-size: 18px">DAO</a></td>
	<td id="daoPoolSize"></td></tr>
	<tr><td><img src="img/FUN.png" style="height: 30px; width: auto"></td><td><a href="fun" style="font-size: 18px">FUN</a></td>
	<td id="funPoolSize"></td></tr>
	<tr><td><img src="img/EBEN.png" style="height: 30px; width: auto"></td><td><a href="eben" style="font-size: 18px">EBEN</a></td>
	<td id="ebenPoolSize"></td></tr>
	<tr><td><img src="img/MIST.png" style="height: 30px; width: auto"></td><td><a href="mist" style="font-size: 18px">MIST</a></td>
	<td id="mistPoolSize"></td></tr>
	<tr><td><img src="img/TANGO.png" style="height: 30px; width: auto"></td><td><a href="tango" style="font-size: 18px">TANGO</a></td>
	<td id="tangoPoolSize"></td></tr>
	<tr><td><img src="img/LAW.png" style="height: 30px; width: auto"></td><td><a href="law" style="font-size: 18px">LAW</a></td>
	<td id="lawPoolSize"></td></tr>
</table>
<p style="width: 300px; margin: 0 auto">ðŸ’¡&nbsp;This is a static website. In case of the hosting service provider's breakdown, its <a target="_blank" href="https://crustwebsites.net/ipfs/QmUWT8wm4NPZmmm8CQ4Cn3T1XHQ8bw6ZAphizwra5YLZwX">IPFS version</a> is also provided. Please bookmark this link for emergency.<br>
<br>
Audit Report: <a target="_black" href="https://github.com/catsluck/catsluck/tree/main/audit">https://github.com/catsluck/catsluck/tree/main/audit</a>
</p>
</div>
 
<script>
init();
</script>
</body>
</html>
